(()=>{const t=t=>{t.width=window.innerWidth,t.height=window.innerHeight};window.addEventListener("load",(()=>{const i=document.querySelector("#my_canvas"),e=i.getContext("2d",{willReadFrequently:!0});t(i);class s{constructor(t,i,e,s){this.effect=t,this.x=Math.random()*this.effect.canvasWidth,this.y=this.effect.canvasHeight,this.color=s,this.originX=i,this.originY=e,this.size=this.effect.gap/3,this.dx=0,this.dy=0,this.vx=0,this.vy=0,this.force=0,this.angle=0,this.distance=0,this.friction=.5*Math.random()+.15,this.ease=.05*Math.random()+.005}draw(){this.effect.context.fillStyle=this.color,this.effect.context.fillRect(this.x,this.y,this.size,this.size)}update(){this.dx=this.effect.mouse.x-this.x,this.dy=this.effect.mouse.y-this.y,this.distance=this.dx*this.dx+this.dy*this.dy,this.force=-this.effect.mouse.radius/this.distance,this.distance<this.effect.mouse.radius&&(this.angle=Math.atan2(this.dy,this.dx),this.vx+=this.force*Math.cos(this.angle),this.vy+=this.force*Math.sin(this.angle)),this.x+=(this.vx*=this.friction)+(this.originX-this.x)*this.ease,this.y+=(this.vy*=this.friction)+(this.originY-this.y)*this.ease}}const h=new class{constructor(t,i,e){this.context=t,this.canvasWidth=i,this.canvasHeight=e,this.textX=this.canvasWidth/2,this.textY=this.canvasHeight/2,this.fontSize=200,this.lineHeight=this.fontSize,this.maxTextWidth=.8*this.canvasWidth,this.textInput=document.querySelector("input"),this.timeoutID=null,this.textInput.addEventListener("keyup",(t=>{" "!==t.key&&(clearTimeout(this.timeoutID),this.timeoutID=setTimeout((()=>{this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.wrapText(t.target.value)}),500))})),this.particles=[],this.gap=10,this.mouse={radius:2e4,x:0,y:0},window.addEventListener("mousemove",(t=>{this.mouse.x=t.x,this.mouse.y=t.y})),window.addEventListener("touchmove",(t=>{this.mouse.x=t.changedTouches[0].clientX,this.mouse.y=t.changedTouches[0].clientY})),window.addEventListener("touchend",(t=>{this.mouse.x=t.changedTouches[0].clientX,this.mouse.y=t.changedTouches[0].clientY}))}wrapText(t){const s=this.context.createLinearGradient(0,0,this.canvasWidth,this.canvasHeight);s.addColorStop(.25,"purple"),s.addColorStop(.5,"fuchsia"),s.addColorStop(.75,"blue"),this.context.font=`${this.fontSize}px Righteous`,this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillStyle=s,this.context.strokeStyle=s,this.context.lineWidth=1;let h=[],a=0,n="",c=t.split(" ");for(let t=0;t<c.length;t++){let i=n+c[t]+" ";this.context.measureText(i).width>this.maxTextWidth?(n=c[t]+" ",a++):n=i,h[a]=n}let o=this.lineHeight*a,r=i.height/2-o/2;h.forEach(((t,s)=>{e.fillText(t,i.width/2,r+s*this.lineHeight)})),this.convertToParticle()}convertToParticle(){this.particles=[];const t=this.context.getImageData(0,0,this.canvasWidth,this.canvasHeight).data;this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight);for(let i=0;i<this.canvasHeight;i+=this.gap)for(let e=0;e<this.canvasWidth;e+=this.gap){const h=4*(i*this.canvasWidth+e);if(t[h+3]>0){const a=`rgb(${t[h]}, ${t[h+1]}, ${t[h+2]})`;this.particles.push(new s(this,e,i,a))}}}constellation(){const t=this.particles[0].size/2;for(let i=0;i<this.particles.length;i++)for(let e=i;e<this.particles.length;e++){const s=this.particles[i].x-this.particles[e].x,h=this.particles[i].y-this.particles[e].y,a=Math.hypot(h,s),n=1.75*this.gap;if(a<n){const s=1-a/n;this.context.beginPath(),this.context.moveTo(this.particles[i].x+t,this.particles[i].y+t),this.context.lineTo(this.particles[e].x+t,this.particles[e].y+t),this.context.save(),this.context.globalAlpha=s,this.context.stroke(),this.context.restore()}}}render(){this.particles.forEach((t=>{t.update(),t.draw()})),this.constellation()}resize(t,i){this.canvasWidth=t,this.canvasHeight=i,this.textX=this.canvasWidth/2,this.textY=this.canvasHeight/2,this.maxTextWidth=.8*this.canvasWidth}}(e,i.width,i.height);h.wrapText(h.textInput.value),h.render(),function t(){e.clearRect(0,0,i.width,i.height),h.render(),requestAnimationFrame(t)}(),window.addEventListener("resize",(()=>{t(i),h.resize(i.width,i.height),h.wrapText(h.textInput.value)}))}))})();